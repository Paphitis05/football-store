This Flask application (`app.py`) serves as the backend for a football store management system, providing web interfaces for data entry, querying, and managing orders.

**Key Components:**

1.  **Flask Application Setup**:
    *   Initializes a Flask application instance.
    *   Configures the MySQL database connection parameters (host, user, password, database).

2.  **Database Connection (`get_db_connection`)**:
    *   A utility function to establish a connection to the MySQL database.
    *   It uses `pymysql.cursors.DictCursor` to return query results as dictionaries, making them easier to work with in Python.

3.  **Core Routes**:
    *   `/` (index): Renders the main homepage (`index.html`).
    *   `/queries`: Renders a page dedicated to displaying various query results (`queries.html`).
    *   `/data_entry`: Renders a data entry form (`data_entry.html`). It fetches existing customer and salesperson data to populate dropdowns for new order creation.

4.  **Query Routes (`/query1` to `/query7`)**:
    *   These routes handle specific data retrieval operations from the database, typically triggered by forms on the `queries.html` page.
    *   **`query1`**: Fetches customer details by ID or name.
    *   **`query2`**: Retrieves the number of players associated with a specific team (customer).
    *   **`query3`**: Searches for product details by item ID or name.
    *   **`query4`**: Lists items within a predefined price range (£3.00 to £15.00).
    *   **`query5`**: Finds customers whose addresses contain "Starford" or "Liverpool".
    *   **`query6`**: Calculates the average sale value for each salesperson, accounting for item quantity, price, and any applicable team customer discounts.
    *   **`query7`**: Identifies the single largest order based on its total discounted value, including details about the salesperson and customer involved.

5.  **Data Insertion/Management Routes**:
    *   **`add_customer`**: Handles the POST request to insert a new customer record into the `customer` table.
    *   **`add_item`**: Handles the POST request to insert a new item record into the `item` table.
    *   **`create_order`**: Initiates a new order by inserting a record into the `orders` table. It then redirects the user to `add_items_to_order` to add specific items to this new order.
    *   **`/order/<int:order_id>` (`add_items_to_order`)**:
        *   Displays details of a specific order.
        *   Lists all available items for selection.
        *   Shows items already added to the current order, including calculated discounted prices and subtotals, and a running total for the entire order.
    *   **`/order/<int:order_id>/add_item` (`add_item_to_order_action`)**:
        *   Processes the addition of a selected item with a specified quantity to an existing order.
        *   Updates the `order_item` table and increments the `items_qty` in the `orders` table.

6.  **Application Execution**:
    *   `if __name__ == '__main__': app.run(debug=True)`: This standard Flask block ensures the application runs in debug mode when executed directly, providing helpful error messages during development.

In essence, the `app.py` file orchestrates the interaction between the user's web browser, the Flask server, and the MySQL database to manage customer, item, salesperson, and order data for a football store, with a focus on data entry and analytical queries.